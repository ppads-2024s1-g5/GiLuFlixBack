@model GiLuFlixBack.Models.User

@{
    ViewData["Title"] = "Details";
}

<h1>Details</h1>

<div>
    <h4>Filme</h4>
    <hr />
    <dl class="d-flex justify-content-between">
        <div class="row" >    
            <dt class = "col-sm-2">
                @Html.DisplayNameFor(model => model.Email)
            </dt>
            <dd class = "col-sm-10">
                @Html.DisplayFor(model => model.Email)
            </dd>
            <dt class = "col-sm-2">
                @Html.DisplayNameFor(model => model.Name)
            </dt>
            <dd class = "col-sm-10">
                @Html.DisplayFor(model => model.Name)
            </dd>
        </div>
        <div>
            <button id="btnEnviarSolicitacao" type="button" class="btn btn-outline-secondary btn-sm" style="width:90%;">
                Enviar solicitação de amizade
            </button>
        </div>

        </dl>
        </div>

        <div class="d-flex w-50 mt-5"> 
            <dt class = "col-sm-2">
                @Html.DisplayNameFor(model => model.Friends)
            </dt>
            <dd class = "col-sm-10">
                @Html.DisplayFor(model => model.Friends)
            </dd>
            <dt class = "col-sm-2">
                @Html.DisplayNameFor(model => model.Reviews)
            </dt>
            <dd class = "col-sm-10">
                @Html.DisplayFor(model => model.Reviews)
            </dd>
        </div>

@section Scripts {
    <script>
        $(document).ready(function () {
            // Captura o clique do botão e envia a solicitação de amizade
            $("#btnEnviarSolicitacao").click(function () {
                var solicitanteId = @Model.Id; // ID do usuário logado
                var destinatarioId = @Model.Id; // ID do usuário exibido na página (o mesmo no caso de ser o próprio usuário)

                // Envie a solicitação de amizade via AJAX
                $.post("/User/SolicitarAmizade", { solicitanteId: solicitanteId, destinatarioId: destinatarioId })
                    .done(function (data) {
                        // A solicitação foi enviada com sucesso, você pode fazer algo aqui, como mostrar uma mensagem de sucesso
                        alert("Solicitação de amizade enviada com sucesso!");
                    })
                    .fail(function (error) {
                        // Se houver um erro ao enviar a solicitação, mostre uma mensagem de erro
                        alert("Erro ao enviar solicitação de amizade: " + error.responseText);
                    });
            });
        });
    </script>
}
